<!DOCTYPE html>
<meta charset="utf-8">
<canvas width="960" height="260"></canvas>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-force.v1.min.js"></script>
<script>
  document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
  ':35728/livereload.js?snipver=1"></' + 'script>')
</script>
<body>
  <div id="graph" >use npm install -g livereload to see changes immediately</div>
  <div class="other"><span class="text">other graph</span></div>

  <script>
    // http://thinkingonthinking.com/Getting-Started-With-D3/
    var vis = d3.select("#graph")
    .append("svg")

    var w=900
    var h=400
    vis.attr("width", w)
    vis.attr("height", h)
    vis.text("The Graph")

    var nodes = [
      {x:30,y:150},
      {x:50,y:80},
      {x:90,y:120}
    ];

    var links=[
      {source: nodes[0], target: nodes[1]},
      {source: nodes[2], target: nodes[1]},
    ]

    vis.selectAll("line")
    .data(links)
    .enter()
    .append("line")
    .attr("x1", function(d){return d.source.x})
    .attr("y1", function(d){return d.source.y})
    .attr("x2", function(d){return d.target.x})
    .attr("y2", function(d){return d.target.y})
    .style("stroke", "rgb(6,120,155)")

    vis.selectAll("rect .nodes")
    .data(nodes)
    .enter()
    .append("svg:rect")
    .attr("class","nodes")
    .attr("x", function(d){return d.x-20})
    .attr("y", function(d){return d.y-12})
    .attr("width", "40px")
    .attr("height", "25px")
    .attr("fill", "black")
    .attr("rx", 5)

    // only one node blue - redrawn every time?
    var nodes = d3.selectAll(".nodes").each(
      function(d){
        var current = d3.select(this)
        .style("fill", "blue")
        // vis.appendNode(current)
      }
    )

    var force=d3.forceSimulation(nodes) //
    force.force('center', d3.forceCenter())
    // .size([w,h])
    // .links(links)

    // d3.selectAll(".nodes").call(d3.drag().on("start", ()=>console.log("drag")))
  </script>

</body>
